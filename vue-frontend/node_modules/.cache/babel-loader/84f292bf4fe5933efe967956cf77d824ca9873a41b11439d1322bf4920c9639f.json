{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, createTextVNode as _createTextVNode, vModelText as _vModelText, withModifiers as _withModifiers, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = {\n  class: \"ai-chat-container\"\n};\nconst _hoisted_2 = {\n  class: \"session-list\"\n};\nconst _hoisted_3 = {\n  class: \"session-list-header\"\n};\nconst _hoisted_4 = {\n  class: \"session-list-ul\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n  class: \"chat-section\"\n};\nconst _hoisted_7 = {\n  class: \"top-bar\"\n};\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = {\n  for: \"streamingMode\",\n  style: {\n    \"margin-left\": \"20px\"\n  }\n};\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = {\n  class: \"chat-messages\",\n  ref: \"messagesRef\"\n};\nconst _hoisted_12 = {\n  class: \"message-header\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n  key: 1,\n  class: \"streaming-indicator\"\n};\nconst _hoisted_15 = [\"innerHTML\"];\nconst _hoisted_16 = {\n  class: \"chat-input\"\n};\nconst _hoisted_17 = [\"disabled\"];\nconst _hoisted_18 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Â∑¶‰æß‰ºöËØùÂàóË°® \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[10] || (_cache[10] = _createElementVNode(\"span\", null, \"‰ºöËØùÂàóË°®\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    class: \"new-chat-btn\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.createNewSession && $setup.createNewSession(...args))\n  }, \"Ôºã Êñ∞ËÅäÂ§©\")]), _createElementVNode(\"ul\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.sessions, session => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: session.id,\n      class: _normalizeClass(['session-item', {\n        active: $setup.currentSessionId === session.id\n      }]),\n      onClick: $event => $setup.switchSession(session.id)\n    }, _toDisplayString(session.name || `‰ºöËØù ${session.id}`), 11 /* TEXT, CLASS, PROPS */, _hoisted_5);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Âè≥‰æßËÅäÂ§©Âå∫Âüü \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n    class: \"back-btn\",\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.$router.push('/menu'))\n  }, \"‚Üê ËøîÂõû\"), _createElementVNode(\"button\", {\n    class: \"sync-btn\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.syncHistory && $setup.syncHistory(...args)),\n    disabled: !$setup.currentSessionId || $setup.tempSession\n  }, \"ÂêåÊ≠•ÂéÜÂè≤Êï∞ÊçÆ\", 8 /* PROPS */, _hoisted_8), _cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    for: \"modelType\"\n  }, \"ÈÄâÊã©Ê®°ÂûãÔºö\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"modelType\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.selectedModel = $event),\n    class: \"model-select\"\n  }, [...(_cache[11] || (_cache[11] = [_createElementVNode(\"option\", {\n    value: \"1\"\n  }, \"ÈòøÈáåÁôæÁÇº\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"2\"\n  }, \"ÈòøÈáåÁôæÁÇº RAG\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"3\"\n  }, \"ÈòøÈáåÁôæÁÇº MCP\", -1 /* CACHED */)]))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.selectedModel]]), _createElementVNode(\"label\", _hoisted_9, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    id: \"streamingMode\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.isStreaming = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.isStreaming]]), _cache[12] || (_cache[12] = _createTextVNode(\" ÊµÅÂºèÂìçÂ∫î \", -1 /* CACHED */))]), _createElementVNode(\"button\", {\n    class: \"upload-btn\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $setup.triggerFileUpload && $setup.triggerFileUpload(...args)),\n    disabled: $setup.uploading\n  }, \"üìé ‰∏ä‰º†ÊñáÊ°£(.md/.txt)\", 8 /* PROPS */, _hoisted_10), _createElementVNode(\"input\", {\n    ref: \"fileInput\",\n    type: \"file\",\n    accept: \".md,.txt,text/markdown,text/plain\",\n    style: {\n      \"display\": \"none\"\n    },\n    onChange: _cache[6] || (_cache[6] = (...args) => $setup.handleFileUpload && $setup.handleFileUpload(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)]), _createElementVNode(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.currentMessages, (message, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: _normalizeClass(['message', message.role === 'user' ? 'user-message' : 'ai-message'])\n    }, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"b\", null, _toDisplayString(message.role === 'user' ? '‰Ω†' : 'AI') + \":\", 1 /* TEXT */), message.role === 'assistant' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      class: \"tts-btn\",\n      onClick: $event => $setup.playTTS(message.content)\n    }, \"üîä\", 8 /* PROPS */, _hoisted_13)) : _createCommentVNode(\"v-if\", true), message.meta && message.meta.status === 'streaming' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, \" ¬∑¬∑\")) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", {\n      class: \"message-content\",\n      innerHTML: $setup.renderMarkdown(message.content)\n    }, null, 8 /* PROPS */, _hoisted_15)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), _createElementVNode(\"div\", _hoisted_16, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.inputMessage = $event),\n    placeholder: \"ËØ∑ËæìÂÖ•‰Ω†ÁöÑÈóÆÈ¢ò...\",\n    onKeydown: _cache[8] || (_cache[8] = _withKeys(_withModifiers((...args) => $setup.sendMessage && $setup.sendMessage(...args), [\"exact\", \"prevent\"]), [\"enter\"])),\n    disabled: $setup.loading,\n    ref: \"messageInput\",\n    rows: \"1\"\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_17), [[_vModelText, $setup.inputMessage]]), _createElementVNode(\"button\", {\n    type: \"button\",\n    disabled: !$setup.inputMessage.trim() || $setup.loading,\n    onClick: _cache[9] || (_cache[9] = (...args) => $setup.sendMessage && $setup.sendMessage(...args)),\n    class: \"send-btn\"\n  }, _toDisplayString($setup.loading ? 'ÂèëÈÄÅ‰∏≠...' : 'ÂèëÈÄÅ'), 9 /* TEXT, PROPS */, _hoisted_18)])])]);\n}","map":{"version":3,"names":["class","for","style","ref","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","args","$setup","createNewSession","_hoisted_4","_Fragment","_renderList","sessions","session","key","id","_normalizeClass","active","currentSessionId","$event","switchSession","name","_hoisted_5","_hoisted_6","_hoisted_7","_ctx","$router","push","syncHistory","disabled","tempSession","_hoisted_8","selectedModel","value","_hoisted_9","type","isStreaming","triggerFileUpload","uploading","_hoisted_10","accept","onChange","handleFileUpload","_hoisted_11","currentMessages","message","index","role","_hoisted_12","_toDisplayString","playTTS","content","_hoisted_13","meta","status","_hoisted_14","innerHTML","renderMarkdown","_hoisted_16","inputMessage","placeholder","onKeydown","_withKeys","_withModifiers","sendMessage","loading","rows","trim","_hoisted_18"],"sources":["/Users/james/Desktop/1.2-CS/00-projects/GopherAI/GopherAI-v2/vue-frontend/src/views/AIChat.vue"],"sourcesContent":["<template>\n  <div class=\"ai-chat-container\">\n    <!-- Â∑¶‰æß‰ºöËØùÂàóË°® -->\n    <div class=\"session-list\">\n      <div class=\"session-list-header\">\n        <span>‰ºöËØùÂàóË°®</span>\n        <button class=\"new-chat-btn\" @click=\"createNewSession\">Ôºã Êñ∞ËÅäÂ§©</button>\n      </div>\n      <ul class=\"session-list-ul\">\n        <li\n          v-for=\"session in sessions\"\n          :key=\"session.id\"\n          :class=\"['session-item', { active: currentSessionId === session.id }]\"\n          @click=\"switchSession(session.id)\"\n        >\n          {{ session.name || `‰ºöËØù ${session.id}` }}\n        </li>\n      </ul>\n    </div>\n\n    <!-- Âè≥‰æßËÅäÂ§©Âå∫Âüü -->\n    <div class=\"chat-section\">\n      <div class=\"top-bar\">\n        <button class=\"back-btn\" @click=\"$router.push('/menu')\">‚Üê ËøîÂõû</button>\n        <button class=\"sync-btn\" @click=\"syncHistory\" :disabled=\"!currentSessionId || tempSession\">ÂêåÊ≠•ÂéÜÂè≤Êï∞ÊçÆ</button>\n        <label for=\"modelType\">ÈÄâÊã©Ê®°ÂûãÔºö</label>\n        <select id=\"modelType\" v-model=\"selectedModel\" class=\"model-select\">\n          <option value=\"1\">ÈòøÈáåÁôæÁÇº</option>\n          <option value=\"2\">ÈòøÈáåÁôæÁÇº RAG</option>\n          <option value=\"3\">ÈòøÈáåÁôæÁÇº MCP</option>\n        </select>\n        <label for=\"streamingMode\" style=\"margin-left: 20px;\">\n          <input type=\"checkbox\" id=\"streamingMode\" v-model=\"isStreaming\" />\n          ÊµÅÂºèÂìçÂ∫î\n        </label>\n        <button class=\"upload-btn\" @click=\"triggerFileUpload\" :disabled=\"uploading\">üìé ‰∏ä‰º†ÊñáÊ°£(.md/.txt)</button>\n        <input\n          ref=\"fileInput\"\n          type=\"file\"\n          accept=\".md,.txt,text/markdown,text/plain\"\n          style=\"display: none\"\n          @change=\"handleFileUpload\"\n        />\n      </div>\n\n      <div class=\"chat-messages\" ref=\"messagesRef\">\n        <div\n          v-for=\"(message, index) in currentMessages\"\n          :key=\"index\"\n          :class=\"['message', message.role === 'user' ? 'user-message' : 'ai-message']\"\n        >\n          <div class=\"message-header\">\n            <b>{{ message.role === 'user' ? '‰Ω†' : 'AI' }}:</b>\n            <button v-if=\"message.role === 'assistant'\" class=\"tts-btn\" @click=\"playTTS(message.content)\">üîä</button>\n            <span v-if=\"message.meta && message.meta.status === 'streaming'\" class=\"streaming-indicator\"> ¬∑¬∑</span>\n          </div>\n          <div class=\"message-content\" v-html=\"renderMarkdown(message.content)\"></div>\n        </div>\n      </div>\n\n      <div class=\"chat-input\">\n        <textarea\n          v-model=\"inputMessage\"\n          placeholder=\"ËØ∑ËæìÂÖ•‰Ω†ÁöÑÈóÆÈ¢ò...\"\n          @keydown.enter.exact.prevent=\"sendMessage\"\n          :disabled=\"loading\"\n          ref=\"messageInput\"\n          rows=\"1\"\n        ></textarea>\n        <button\n          type=\"button\"\n          :disabled=\"!inputMessage.trim() || loading\"\n          @click=\"sendMessage\"\n          class=\"send-btn\"\n        >\n          {{ loading ? 'ÂèëÈÄÅ‰∏≠...' : 'ÂèëÈÄÅ' }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\n\nimport { ref, nextTick, computed, onMounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport api from '../utils/api'\n\nexport default {\n  name: 'AIChat',\n  setup() {\n\n    const sessions = ref({})\n    const currentSessionId = ref(null)\n    const tempSession = ref(false)\n    const currentMessages = ref([])\n    const inputMessage = ref('')\n    const loading = ref(false)\n    const messagesRef = ref(null)\n    const messageInput = ref(null)\n    const selectedModel = ref('1')\n    const isStreaming = ref(false)\n    const uploading = ref(false)\n    const fileInput = ref(null)\n\n\n    const renderMarkdown = (text) => {\n      if (!text && text !== '') return ''\n      return String(text)\n        .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n        .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n        .replace(/`(.*?)`/g, '<code>$1</code>')\n        .replace(/\\n/g, '<br>')\n    }\n\n    const playTTS = async (text) => {\n      try {\n        // ÂàõÂª∫TTS‰ªªÂä°\n        const createResponse = await api.post('/AI/chat/tts', { text })\n        if (createResponse.data && createResponse.data.status_code === 1000 && createResponse.data.task_id) {\n          const taskId = createResponse.data.task_id\n          \n          // ÂÖàÁ≠âÂæÖ5ÁßíÈíüÂÜçÂºÄÂßãËΩÆËØ¢\n          await new Promise(resolve => setTimeout(resolve, 5000))\n          \n          // ËΩÆËØ¢Êü•ËØ¢‰ªªÂä°ÁªìÊûú\n          const maxAttempts = 30\n          const pollInterval = 2000\n          let attempts = 0\n          \n          const pollResult = async () => {\n            const queryResponse = await api.get('/AI/chat/tts/query', { params: { task_id: taskId } })\n            \n            if (queryResponse.data && queryResponse.data.status_code === 1000) {\n              const taskStatus = queryResponse.data.task_status\n                \n              if (taskStatus === 'Success' && queryResponse.data.task_result) {\n                // ‰ªªÂä°ÂÆåÊàêÔºåÊí≠ÊîæÈü≥È¢ë\n                // ÂêéÁ´ØËøîÂõûÁöÑ task_result ÊòØÁõ¥Êé•ÁöÑ URL Â≠óÁ¨¶‰∏≤\n                const audio = new Audio(queryResponse.data.task_result)\n                audio.play()\n                return true\n              } else if (taskStatus === 'Running' ||taskStatus === 'Created' ) {\n                // ‰ªªÂä°ËøõË°å‰∏≠ÔºåÁªßÁª≠ËΩÆËØ¢\n                attempts++\n                if (attempts < maxAttempts) {\n                  await new Promise(resolve => setTimeout(resolve, pollInterval))\n                  return await pollResult()\n                } else {\n                  ElMessage.error('ËØ≠Èü≥ÂêàÊàêË∂ÖÊó∂')\n                  return true\n                }\n              } else {\n                // ÂÖ∂‰ªñÁä∂ÊÄÅÔºàÂ¶ÇÂ§±Ë¥•Ôºâ\n                ElMessage.error('ËØ≠Èü≥ÂêàÊàêÂ§±Ë¥•')\n                return true\n              }\n            }\n            \n            attempts++\n            if (attempts < maxAttempts) {\n              await new Promise(resolve => setTimeout(resolve, pollInterval))\n              return await pollResult()\n            } else {\n              ElMessage.error('ËØ≠Èü≥ÂêàÊàêË∂ÖÊó∂')\n              return true\n            }\n          }\n          \n          await pollResult()\n        } else {\n          ElMessage.error('Êó†Ê≥ïÂàõÂª∫ËØ≠Èü≥ÂêàÊàê‰ªªÂä°')\n        }\n      } catch (error) {\n        console.error('TTS error:', error)\n        ElMessage.error('ËØ∑Ê±ÇËØ≠Èü≥Êé•Âè£Â§±Ë¥•')\n      }\n    }\n\n    const loadSessions = async () => {\n      try {\n        const response = await api.get('/AI/chat/sessions')\n        if (response.data && response.data.status_code === 1000 && Array.isArray(response.data.sessions)) {\n          const sessionMap = {}\n          response.data.sessions.forEach(s => {\n            const sid = String(s.sessionId)\n            sessionMap[sid] = {\n              id: sid,\n              name: s.name || `‰ºöËØù ${sid}`,\n              messages: [] // lazy load\n            }\n          })\n          sessions.value = sessionMap\n        }\n      } catch (error) {\n        console.error('Load sessions error:', error)\n      }\n    }\n\n    const createNewSession = () => {\n      currentSessionId.value = 'temp'\n      tempSession.value = true\n      currentMessages.value = []\n      // focus input\n      nextTick(() => {\n        if (messageInput.value) messageInput.value.focus()\n      })\n    }\n\n    const switchSession = async (sessionId) => {\n      if (!sessionId) return\n      currentSessionId.value = String(sessionId)\n      tempSession.value = false\n\n      // lazy load history if not present\n      if (!sessions.value[sessionId].messages || sessions.value[sessionId].messages.length === 0) {\n        try {\n          const response = await api.post('/AI/chat/history', { sessionId: currentSessionId.value })\n          if (response.data && response.data.status_code === 1000 && Array.isArray(response.data.history)) {\n            const messages = response.data.history.map(item => ({\n              role: item.is_user ? 'user' : 'assistant',\n              content: item.content\n            }))\n            sessions.value[sessionId].messages = messages\n          }\n        } catch (err) {\n          console.error('Load history error:', err)\n        }\n      }\n\n\n      currentMessages.value = [...(sessions.value[sessionId].messages || [])]\n      await nextTick()\n      scrollToBottom()\n    }\n\n    const syncHistory = async () => {\n      if (!currentSessionId.value || tempSession.value) {\n        ElMessage.warning('ËØ∑ÈÄâÊã©Â∑≤Êúâ‰ºöËØùËøõË°åÂêåÊ≠•')\n        return\n      }\n      try {\n        const response = await api.post('/AI/chat/history', { sessionId: currentSessionId.value })\n        if (response.data && response.data.status_code === 1000 && Array.isArray(response.data.history)) {\n          const messages = response.data.history.map(item => ({\n            role: item.is_user ? 'user' : 'assistant',\n            content: item.content\n          }))\n          sessions.value[currentSessionId.value].messages = messages\n          currentMessages.value = [...messages]\n          await nextTick()\n          scrollToBottom()\n        } else {\n          ElMessage.error('Êó†Ê≥ïËé∑ÂèñÂéÜÂè≤Êï∞ÊçÆ')\n        }\n      } catch (err) {\n        console.error('Sync history error:', err)\n        ElMessage.error('ËØ∑Ê±ÇÂéÜÂè≤Êï∞ÊçÆÂ§±Ë¥•')\n      }\n    }\n\n\n    const sendMessage = async () => {\n      if (!inputMessage.value || !inputMessage.value.trim()) {\n        ElMessage.warning('ËØ∑ËæìÂÖ•Ê∂àÊÅØÂÜÖÂÆπ')\n        return\n      }\n\n      const userMessage = {\n        role: 'user',\n        content: inputMessage.value\n      }\n      const currentInput = inputMessage.value\n      inputMessage.value = ''\n\n\n      currentMessages.value.push(userMessage)\n      await nextTick()\n      scrollToBottom()\n\n      try {\n        loading.value = true\n        if (isStreaming.value) {\n\n          await handleStreaming(currentInput)\n        } else {\n\n          await handleNormal(currentInput)\n        }\n      } catch (err) {\n        console.error('Send message error:', err)\n        ElMessage.error('ÂèëÈÄÅÂ§±Ë¥•ÔºåËØ∑ÈáçËØï')\n\n        if (!tempSession.value && currentSessionId.value && sessions.value[currentSessionId.value] && sessions.value[currentSessionId.value].messages) {\n\n          const sessionArr = sessions.value[currentSessionId.value].messages\n          if (sessionArr && sessionArr.length) sessionArr.pop()\n        }\n        currentMessages.value.pop()\n      } finally {\n        if (!isStreaming.value) {\n          loading.value = false\n        }\n        await nextTick()\n        scrollToBottom()\n      }\n    }\n\n\n    async function handleStreaming(question) {\n\n      const aiMessage = {\n        role: 'assistant',\n        content: '',\n        meta: { status: 'streaming' } // mark streaming\n      }\n\n\n      const aiMessageIndex = currentMessages.value.length\n      currentMessages.value.push(aiMessage)\n\n      if (!tempSession.value && currentSessionId.value && sessions.value[currentSessionId.value]) {\n        if (!sessions.value[currentSessionId.value].messages) sessions.value[currentSessionId.value].messages = []\n        sessions.value[currentSessionId.value].messages.push({ role: 'assistant', content: '' })\n      }\n\n\n      const url = tempSession.value\n        ? '/api/AI/chat/send-stream-new-session'  \n        : '/api/AI/chat/send-stream'           \n\n      const headers = {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('token') || ''}`\n      }\n\n      const body = tempSession.value\n        ? { question: question, modelType: selectedModel.value }\n        : { question: question, modelType: selectedModel.value, sessionId: currentSessionId.value }\n\n      try {\n        // ÂàõÂª∫ fetch ËøûÊé•ËØªÂèñ SSE ÊµÅ\n        const response = await fetch(url, {\n          method: 'POST',\n          headers,\n          body: JSON.stringify(body)\n        })\n\n        if (!response.ok) {\n          loading.value = false\n          throw new Error('Network response was not ok')\n        }\n\n        const reader = response.body.getReader()\n        const decoder = new TextDecoder()\n        let buffer = ''\n\n        // ËØªÂèñÊµÅÊï∞ÊçÆ\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n          const { done, value } = await reader.read()\n          if (done) break\n\n          const chunk = decoder.decode(value, { stream: true })\n          buffer += chunk\n\n          // ÊåâË°åÂàÜÂâ≤\n          const lines = buffer.split('\\n')\n          buffer = lines.pop() || '' // ‰øùÁïôÊú™ÂÆåÊàêÁöÑË°å\n\n          for (const line of lines) {\n            const trimmedLine = line.trim()\n            if (!trimmedLine) continue\n\n            // Â§ÑÁêÜ SSE Ê†ºÂºèÔºödata: <content>\n            if (trimmedLine.startsWith('data:')) {\n              const data = trimmedLine.slice(5).trim()\n              console.log('[SSE] Received:', data) // Ë∞ÉËØïÊó•Âøó\n\n              if (data === '[DONE]') {\n                // ÊµÅÁªìÊùü\n                console.log('[SSE] Stream done')\n                loading.value = false\n                currentMessages.value[aiMessageIndex].meta = { status: 'done' }\n                currentMessages.value = [...currentMessages.value]\n              } else if (data.startsWith('{')) {\n                // Â∞ùËØïËß£Êûê JSONÔºàÂ¶Ç sessionIdÔºâ\n                try {\n                  const parsed = JSON.parse(data)\n                  if (parsed.sessionId) {\n                    const newSid = String(parsed.sessionId)\n                    console.log('[SSE] Session ID:', newSid)\n                    if (tempSession.value) {\n                      sessions.value[newSid] = {\n                        id: newSid,\n                        name: 'Êñ∞‰ºöËØù',\n                        messages: [...currentMessages.value]\n                      }\n                      currentSessionId.value = newSid\n                      tempSession.value = false\n                    }\n                  }\n                } catch (e) {\n                  // ‰∏çÊòØ JSONÔºåÂΩì‰ΩúÊôÆÈÄöÊñáÊú¨Â§ÑÁêÜ\n                  currentMessages.value[aiMessageIndex].content += data\n                  console.log('[SSE] Content updated:', currentMessages.value[aiMessageIndex].content.length)\n                }\n              } else {\n                // ÊôÆÈÄöÊñáÊú¨Êï∞ÊçÆÔºåÁõ¥Êé•ËøΩÂä†\n                // ‰ΩøÁî®Êï∞ÁªÑÁ¥¢ÂºïÁõ¥Êé•Êõ¥Êñ∞ÔºåÂº∫Âà∂ Vue ÂìçÂ∫îÂºèÁ≥ªÁªüÊ£ÄÊµãÂèòÂåñ\n                currentMessages.value[aiMessageIndex].content += data\n                console.log('[SSE] Content updated:', currentMessages.value[aiMessageIndex].content.length)\n              }\n\n              // ÊØèÊî∂Âà∞‰∏ÄÊù°Êï∞ÊçÆÂ∞±Á´ãÂç≥Êõ¥Êñ∞ DOM\n              // Âº∫Âà∂Êõ¥Êñ∞Êï¥‰∏™Êï∞ÁªÑ‰ª•Ëß¶ÂèëÂìçÂ∫îÂºè\n              currentMessages.value = [...currentMessages.value]\n              \n              // ‰ΩøÁî® requestAnimationFrame Âº∫Âà∂ÊµèËßàÂô®ÈáçÊéí\n              await new Promise(resolve => {\n                requestAnimationFrame(() => {\n                  scrollToBottom()\n                  resolve()\n                })\n              })\n            }\n          }\n        }\n\n        // ÊµÅËØªÂèñÂÆåÊàêÂêéÁöÑÂ§ÑÁêÜ\n        loading.value = false\n        currentMessages.value[aiMessageIndex].meta = { status: 'done' }\n        currentMessages.value = [...currentMessages.value]\n\n        // ÂêåÊ≠•Âà∞ sessions Â≠òÂÇ®\n        if (!tempSession.value && currentSessionId.value && sessions.value[currentSessionId.value]) {\n          const sessMsgs = sessions.value[currentSessionId.value].messages\n          if (Array.isArray(sessMsgs) && sessMsgs.length) {\n            const lastIndex = sessMsgs.length - 1\n            if (sessMsgs[lastIndex] && sessMsgs[lastIndex].role === 'assistant') {\n              sessMsgs[lastIndex].content = currentMessages.value[aiMessageIndex].content\n            }\n          }\n        }\n      } catch (err) {\n        console.error('Stream error:', err)\n        loading.value = false\n        currentMessages.value[aiMessageIndex].meta = { status: 'error' }\n        currentMessages.value = [...currentMessages.value]\n        ElMessage.error('ÊµÅÂºè‰º†ËæìÂá∫Èîô')\n      }\n    }\n\n\n    async function handleNormal(question) {\n      if (tempSession.value) {\n\n        const response = await api.post('/AI/chat/send-new-session', {\n          question: question,\n          modelType: selectedModel.value\n        })\n        if (response.data && response.data.status_code === 1000) {\n          const sessionId = String(response.data.sessionId)\n          const aiMessage = {\n            role: 'assistant',\n            content: response.data.Information || ''\n          }\n\n          sessions.value[sessionId] = {\n            id: sessionId,\n            name: 'Êñ∞‰ºöËØù',\n            messages: [ { role: 'user', content: question }, aiMessage ]\n          }\n          currentSessionId.value = sessionId\n          tempSession.value = false\n          currentMessages.value = [...sessions.value[sessionId].messages]\n        } else {\n          ElMessage.error(response.data?.status_msg || 'ÂèëÈÄÅÂ§±Ë¥•')\n\n          currentMessages.value.pop()\n        }\n      } else {\n\n        const sessionMsgs = sessions.value[currentSessionId.value].messages\n\n        sessionMsgs.push({ role: 'user', content: question })\n\n        const response = await api.post('/AI/chat/send', {\n          question: question,\n          modelType: selectedModel.value,\n          sessionId: currentSessionId.value\n        })\n        if (response.data && response.data.status_code === 1000) {\n          const aiMessage = { role: 'assistant', content: response.data.Information || '' }\n          sessionMsgs.push(aiMessage)\n          currentMessages.value = [...sessionMsgs]\n        } else {\n          ElMessage.error(response.data?.status_msg || 'ÂèëÈÄÅÂ§±Ë¥•')\n          sessionMsgs.pop() // rollback\n          currentMessages.value.pop()\n        }\n      }\n    }\n\n\n    const scrollToBottom = () => {\n      if (messagesRef.value) {\n        try {\n          messagesRef.value.scrollTop = messagesRef.value.scrollHeight\n        } catch (e) {\n          // ignore\n        }\n      }\n    }\n\n    const triggerFileUpload = () => {\n      if (fileInput.value) {\n        fileInput.value.click()\n      }\n    }\n\n    const handleFileUpload = async (event) => {\n      const file = event.target.files[0]\n      if (!file) return\n\n      // ÂâçÁ´ØÊ†°È™åÔºöÂè™ÂÖÅËÆ∏.mdÊàñ.txtÊñá‰ª∂\n      const fileName = file.name.toLowerCase()\n      if (!fileName.endsWith('.md') && !fileName.endsWith('.txt')) {\n        ElMessage.error('Âè™ÂÖÅËÆ∏‰∏ä‰º† .md Êàñ .txt Êñá‰ª∂')\n        // Ê∏ÖÁ©∫Êñá‰ª∂ËæìÂÖ•\n        if (fileInput.value) {\n          fileInput.value.value = ''\n        }\n        return\n      }\n\n      try {\n        uploading.value = true\n        const formData = new FormData()\n        formData.append('file', file)\n\n        const response = await api.post('/file/upload', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        })\n\n        if (response.data && response.data.status_code === 1000) {\n          ElMessage.success(`Êñá‰ª∂‰∏ä‰º†ÊàêÂäü`)\n        } else {\n          ElMessage.error(response.data?.status_msg || '‰∏ä‰º†Â§±Ë¥•')\n        }\n      } catch (error) {\n        console.error('File upload error:', error)\n        ElMessage.error('Êñá‰ª∂‰∏ä‰º†Â§±Ë¥•')\n      } finally {\n        uploading.value = false\n        // Ê∏ÖÁ©∫Êñá‰ª∂ËæìÂÖ•\n        if (fileInput.value) {\n          fileInput.value.value = ''\n        }\n      }\n    }\n\n    onMounted(() => {\n      loadSessions()\n    })\n\n    // expose to template\n    return {\n      sessions: computed(() => Object.values(sessions.value)),\n      currentSessionId,\n      tempSession,\n      currentMessages,\n      inputMessage,\n      loading,\n      messagesRef,\n      messageInput,\n      selectedModel,\n      isStreaming,\n      uploading,\n      fileInput,\n      renderMarkdown,\n      playTTS,\n      createNewSession,\n      switchSession,\n      syncHistory,\n      sendMessage,\n      triggerFileUpload,\n      handleFileUpload\n    }\n  }\n}\n</script>\n\n<style scoped>\n.ai-chat-container {\n  height: 100vh;\n  display: flex;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  position: relative;\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial;\n  color: #222;\n}\n\n.ai-chat-container::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><circle cx=\"20\" cy=\"20\" r=\"2\" fill=\"rgba(255,255,255,0.08)\"/><circle cx=\"80\" cy=\"80\" r=\"2\" fill=\"rgba(255,255,255,0.08)\"/><circle cx=\"40\" cy=\"60\" r=\"1\" fill=\"rgba(255,255,255,0.06)\"/><circle cx=\"60\" cy=\"30\" r=\"1.5\" fill=\"rgba(255,255,255,0.06)\"/></svg>');\n  animation: float 20s ease-in-out infinite;\n  opacity: 0.25;\n}\n\n@keyframes float {\n  0%, 100% { transform: translateY(0px) rotate(0deg); }\n  50% { transform: translateY(-20px) rotate(180deg); }\n}\n\n.session-list {\n  width: 280px;\n  height: 100vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(15px);\n  border-right: 1px solid rgba(0, 0, 0, 0.08);\n  box-shadow: 2px 0 20px rgba(0, 0, 0, 0.08);\n  position: relative;\n  z-index: 2;\n}\n\n.session-list-header {\n  padding: 20px;\n  text-align: center;\n  font-weight: 600;\n  background: linear-gradient(135deg, rgba(102, 126, 234, 0.06) 0%, rgba(103, 194, 58, 0.06) 100%);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  align-items: center;\n}\n\n.new-chat-btn {\n  width: 100%;\n  padding: 12px 0;\n  cursor: pointer;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 12px;\n  font-size: 14px;\n  font-weight: 600;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.28);\n  transition: all 0.25s ease;\n  position: relative;\n  overflow: hidden;\n}\n\n.new-chat-btn::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.12), transparent);\n  transition: left 0.5s;\n}\n\n.new-chat-btn:hover::before {\n  left: 100%;\n}\n\n.new-chat-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.36);\n}\n\n.session-list-ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  flex: 1;\n  overflow-y: auto;\n}\n\n.session-item {\n  padding: 15px 20px;\n  cursor: pointer;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.03);\n  transition: all 0.2s ease;\n  position: relative;\n  color: #2c3e50;\n}\n\n.session-item.active {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  font-weight: 600;\n  box-shadow: inset 0 0 20px rgba(102, 126, 234, 0.2);\n}\n\n.session-item:hover {\n  background: rgba(102, 126, 234, 0.06);\n  transform: translateX(4px);\n}\n\n/* chat section */\n.chat-section {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  z-index: 1;\n  min-width: 0;\n  min-height: 0;\n  overflow: hidden;\n}\n\n.top-bar {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  color: #2c3e50;\n  display: flex;\n  align-items: center;\n  padding: 12px 24px;\n  box-shadow: 0 2px 14px rgba(0, 0, 0, 0.06);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n  gap: 12px;\n}\n\n.back-btn {\n  background: rgba(255, 255, 255, 0.22);\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  color: #2c3e50;\n  padding: 8px 14px;\n  border-radius: 10px;\n  cursor: pointer;\n  font-weight: 600;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.back-btn:hover {\n  background: rgba(255, 255, 255, 0.32);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);\n}\n\n.sync-btn {\n  background: linear-gradient(135deg, #67c23a 0%, #409eff 100%);\n  color: white;\n  padding: 8px 14px;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 600;\n  box-shadow: 0 4px 12px rgba(103, 194, 58, 0.2);\n  transition: all 0.2s ease;\n}\n\n.sync-btn:disabled {\n  background: #ccc;\n  box-shadow: none;\n  cursor: not-allowed;\n}\n\n.model-select {\n  margin-left: 6px;\n  padding: 6px 10px;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  border-radius: 8px;\n  background: white;\n  color: #2c3e50;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.upload-btn {\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n  color: white;\n  padding: 8px 14px;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 600;\n  box-shadow: 0 4px 12px rgba(245, 87, 108, 0.2);\n  transition: all 0.2s ease;\n}\n\n.upload-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(245, 87, 108, 0.3);\n}\n\n.upload-btn:disabled {\n  background: #ccc;\n  box-shadow: none;\n  cursor: not-allowed;\n}\n\n.chat-messages {\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n  padding: 30px;\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n  position: relative;\n  z-index: 1;\n}\n\n/* scrollbar */\n.chat-messages::-webkit-scrollbar {\n  width: 8px;\n}\n.chat-messages::-webkit-scrollbar-thumb {\n  background: rgba(0,0,0,0.12);\n  border-radius: 8px;\n}\n.chat-messages::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.message {\n  max-width: 70%;\n  padding: 14px 18px;\n  border-radius: 18px;\n  line-height: 1.6;\n  word-wrap: break-word;\n  position: relative;\n  animation: messageSlideIn 0.28s ease-out;\n  font-size: 15px;\n  box-sizing: border-box;\n}\n\n@keyframes messageSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(12px) scale(0.98);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.user-message {\n  align-self: flex-end;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.16);\n}\n\n.user-message::after {\n  content: '';\n  position: absolute;\n  bottom: -6px;\n  right: 18px;\n  width: 0;\n  height: 0;\n  border-left: 8px solid transparent;\n  border-right: 8px solid transparent;\n  border-top: 8px solid #764ba2;\n}\n\n.ai-message {\n  align-self: flex-start;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(4px);\n  color: #2c3e50;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n.ai-message::after {\n  content: '';\n  position: absolute;\n  bottom: -6px;\n  left: 18px;\n  width: 0;\n  height: 0;\n  border-left: 8px solid transparent;\n  border-right: 8px solid transparent;\n  border-top: 8px solid rgba(255, 255, 255, 0.95);\n}\n\n.message-header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 8px;\n}\n\n.message-header b {\n  font-weight: 600;\n}\n\n.tts-btn {\n  padding: 6px 10px;\n  border-radius: 8px;\n  font-size: 12px;\n  cursor: pointer;\n  background: linear-gradient(135deg, #67c23a 0%, #409eff 100%);\n  color: white;\n  border: none;\n  transition: all 0.18s ease;\n  box-shadow: 0 2px 8px rgba(103, 194, 58, 0.18);\n}\n\n.tts-btn:hover {\n  transform: scale(1.05);\n  box-shadow: 0 4px 12px rgba(103, 194, 58, 0.25);\n}\n\n.streaming-indicator {\n  color: #999;\n  font-weight: 600;\n  margin-left: 6px;\n}\n\n/* message content */\n.message-content {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n/* input area */\n.chat-input {\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.96);\n  backdrop-filter: blur(8px);\n  border-top: 1px solid rgba(0, 0, 0, 0.06);\n  position: relative;\n  z-index: 1;\n}\n\n.chat-input textarea {\n  width: 100%;\n  resize: none;\n  border: 2px solid rgba(0, 0, 0, 0.06);\n  border-radius: 12px;\n  padding: 14px 16px;\n  font-size: 15px;\n  outline: none;\n  background: rgba(255,255,255,0.96);\n  color: #2c3e50;\n  transition: all 0.18s ease;\n  min-height: 20px;\n  max-height: 160px;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.04);\n}\n\n.chat-input textarea:focus {\n  border-color: #409eff;\n  box-shadow: 0 8px 30px rgba(64,158,255,0.06);\n  transform: translateY(-1px);\n}\n\n.send-btn {\n  position: absolute;\n  right: 36px;\n  bottom: 30px;\n  padding: 12px 22px;\n  border: none;\n  border-radius: 50px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  box-shadow: 0 6px 20px rgba(102,126,234,0.18);\n  transition: all 0.18s ease;\n}\n\n.send-btn:hover:not(:disabled) {\n  transform: translateY(-3px) scale(1.02);\n}\n\n.send-btn:disabled {\n  background: #ccc;\n  box-shadow: none;\n  cursor: not-allowed;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAmB;;EAEvBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAqB;;EAI5BA,KAAK,EAAC;AAAiB;;;EAaxBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAS;;;EASXC,GAAG,EAAC,eAAe;EAACC,KAA0B,EAA1B;IAAA;EAAA;;;;EAcxBF,KAAK,EAAC,eAAe;EAACG,GAAG,EAAC;;;EAMtBH,KAAK,EAAC;AAAgB;;;;EAGwCA,KAAK,EAAC;;;;EAMxEA,KAAK,EAAC;AAAY;;;;uBA3D3BI,mBAAA,CA8EM,OA9ENC,UA8EM,GA7EJC,mBAAA,YAAe,EACfC,mBAAA,CAeM,OAfNC,UAeM,GAdJD,mBAAA,CAGM,OAHNE,UAGM,G,4BAFJF,mBAAA,CAAiB,cAAX,MAAI,qBACVA,mBAAA,CAAqE;IAA7DP,KAAK,EAAC,cAAc;IAAEU,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,MAAA,CAAAC,gBAAA,IAAAD,MAAA,CAAAC,gBAAA,IAAAF,IAAA,CAAgB;KAAE,OAAK,E,GAE9DL,mBAAA,CASK,MATLQ,UASK,I,kBARHX,mBAAA,CAOKY,SAAA,QAAAC,WAAA,CANeJ,MAAA,CAAAK,QAAQ,EAAnBC,OAAO;yBADhBf,mBAAA,CAOK;MALFgB,GAAG,EAAED,OAAO,CAACE,EAAE;MACfrB,KAAK,EAAAsB,eAAA;QAAAC,MAAA,EAA6BV,MAAA,CAAAW,gBAAgB,KAAKL,OAAO,CAACE;MAAE;MACjEX,OAAK,EAAAe,MAAA,IAAEZ,MAAA,CAAAa,aAAa,CAACP,OAAO,CAACE,EAAE;wBAE7BF,OAAO,CAACQ,IAAI,UAAUR,OAAO,CAACE,EAAE,kCAAAO,UAAA;sCAKzCtB,mBAAA,YAAe,EACfC,mBAAA,CAyDM,OAzDNsB,UAyDM,GAxDJtB,mBAAA,CAqBM,OArBNuB,UAqBM,GApBJvB,mBAAA,CAAqE;IAA7DP,KAAK,EAAC,UAAU;IAAEU,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAc,MAAA,IAAEM,IAAA,CAAAC,OAAO,CAACC,IAAI;KAAW,MAAI,GAC5D1B,mBAAA,CAA0G;IAAlGP,KAAK,EAAC,UAAU;IAAEU,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,MAAA,CAAAqB,WAAA,IAAArB,MAAA,CAAAqB,WAAA,IAAAtB,IAAA,CAAW;IAAGuB,QAAQ,GAAGtB,MAAA,CAAAW,gBAAgB,IAAIX,MAAA,CAAAuB;KAAa,QAAM,iBAAAC,UAAA,G,4BACjG9B,mBAAA,CAAoC;IAA7BN,GAAG,EAAC;EAAW,GAAC,OAAK,qB,gBAC5BM,mBAAA,CAIS;IAJDc,EAAE,EAAC,WAAW;+DAAUR,MAAA,CAAAyB,aAAa,GAAAb,MAAA;IAAEzB,KAAK,EAAC;uCACnDO,mBAAA,CAA+B;IAAvBgC,KAAK,EAAC;EAAG,GAAC,MAAI,oBACtBhC,mBAAA,CAAmC;IAA3BgC,KAAK,EAAC;EAAG,GAAC,UAAQ,oBAC1BhC,mBAAA,CAAmC;IAA3BgC,KAAK,EAAC;EAAG,GAAC,UAAQ,mB,6CAHI1B,MAAA,CAAAyB,aAAa,E,GAK7C/B,mBAAA,CAGQ,SAHRiC,UAGQ,G,gBAFNjC,mBAAA,CAAkE;IAA3DkC,IAAI,EAAC,UAAU;IAACpB,EAAE,EAAC,eAAe;+DAAUR,MAAA,CAAA6B,WAAW,GAAAjB,MAAA;qDAAXZ,MAAA,CAAA6B,WAAW,E,gDAAI,QAEpE,oB,GACAnC,mBAAA,CAAsG;IAA9FP,KAAK,EAAC,YAAY;IAAEU,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,MAAA,CAAA8B,iBAAA,IAAA9B,MAAA,CAAA8B,iBAAA,IAAA/B,IAAA,CAAiB;IAAGuB,QAAQ,EAAEtB,MAAA,CAAA+B;KAAW,mBAAiB,iBAAAC,WAAA,GAC7FtC,mBAAA,CAME;IALAJ,GAAG,EAAC,WAAW;IACfsC,IAAI,EAAC,MAAM;IACXK,MAAM,EAAC,mCAAmC;IAC1C5C,KAAqB,EAArB;MAAA;IAAA,CAAqB;IACpB6C,QAAM,EAAApC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,MAAA,CAAAmC,gBAAA,IAAAnC,MAAA,CAAAmC,gBAAA,IAAApC,IAAA,CAAgB;oDAI7BL,mBAAA,CAaM,OAbN0C,WAaM,I,kBAZJ7C,mBAAA,CAWMY,SAAA,QAAAC,WAAA,CAVuBJ,MAAA,CAAAqC,eAAe,GAAlCC,OAAO,EAAEC,KAAK;yBADxBhD,mBAAA,CAWM;MATHgB,GAAG,EAAEgC,KAAK;MACVpD,KAAK,EAAAsB,eAAA,aAAc6B,OAAO,CAACE,IAAI;QAEhC9C,mBAAA,CAIM,OAJN+C,WAIM,GAHJ/C,mBAAA,CAAkD,WAAAgD,gBAAA,CAA5CJ,OAAO,CAACE,IAAI,4BAA2B,GAAC,iBAChCF,OAAO,CAACE,IAAI,oB,cAA1BjD,mBAAA,CAAyG;;MAA7DJ,KAAK,EAAC,SAAS;MAAEU,OAAK,EAAAe,MAAA,IAAEZ,MAAA,CAAA2C,OAAO,CAACL,OAAO,CAACM,OAAO;OAAG,IAAE,iBAAAC,WAAA,K,mCACpFP,OAAO,CAACQ,IAAI,IAAIR,OAAO,CAACQ,IAAI,CAACC,MAAM,oB,cAA/CxD,mBAAA,CAAuG,QAAvGyD,WAAuG,EAAV,KAAG,K,qCAElGtD,mBAAA,CAA4E;MAAvEP,KAAK,EAAC,iBAAiB;MAAC8D,SAAwC,EAAhCjD,MAAA,CAAAkD,cAAc,CAACZ,OAAO,CAACM,OAAO;;0DAIvElD,mBAAA,CAiBM,OAjBNyD,WAiBM,G,gBAhBJzD,mBAAA,CAOY;+DANDM,MAAA,CAAAoD,YAAY,GAAAxC,MAAA;IACrByC,WAAW,EAAC,YAAY;IACvBC,SAAO,EAAAxD,MAAA,QAAAA,MAAA,MAAAyD,SAAA,CAAAC,cAAA,KAAAzD,IAAA,KAAsBC,MAAA,CAAAyD,WAAA,IAAAzD,MAAA,CAAAyD,WAAA,IAAA1D,IAAA,CAAW;IACxCuB,QAAQ,EAAEtB,MAAA,CAAA0D,OAAO;IAClBpE,GAAG,EAAC,cAAc;IAClBqE,IAAI,EAAC;wEALI3D,MAAA,CAAAoD,YAAY,E,GAOvB1D,mBAAA,CAOS;IANPkC,IAAI,EAAC,QAAQ;IACZN,QAAQ,GAAGtB,MAAA,CAAAoD,YAAY,CAACQ,IAAI,MAAM5D,MAAA,CAAA0D,OAAO;IACzC7D,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,MAAA,CAAAyD,WAAA,IAAAzD,MAAA,CAAAyD,WAAA,IAAA1D,IAAA,CAAW;IACnBZ,KAAK,EAAC;sBAEHa,MAAA,CAAA0D,OAAO,0CAAAG,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}